<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>Insert title here</title>
	<link rel="stylesheet" type="text/css" href="../themes/default/linkbutton.css">
	<link rel="stylesheet" type="text/css" href="../themes/default/pagination.css">
	<link rel="stylesheet" type="text/css" href="../themes/default/datagrid.css">
	<link rel="stylesheet" type="text/css" href="../themes/icon.css">
	<script type="text/javascript" src="../src/jquery-1.3.2.min.js"></script>
	<script type="text/javascript" src="../src/jquery.resizable.js"></script>
	<script type="text/javascript" src="../src/jquery.linkbutton.js"></script>
	<script type="text/javascript" src="../src/jquery.pagination.js"></script>
	<script type="text/javascript" src="../src/jquery.datagrid.js"></script>
	<script>
		$(function(){
			$('#test').datagrid({
				title:'My Title',
				iconCls:'icon-save',
				width:600,
				height:350,
				nowrap: false,
				striped: true,
				url:'json_test.jsp',
				sortName: 'code',
				sortOrder: 'desc',
				idField:'orderNo',
				frozenColumns:[[
				                {field:'ck',checkbox:true},
				                {title:'NO',field:'orderNo',width:80,sortable:true}
				]],
				columns:[[
				          {title:'info',colspan:2},
							{field:'addr',title:'地址',width:120,rowspan:2,sortable:true},
							{field:'col4',title:'Col41',width:150,align:'right',rowspan:2},
							{field:'opt',title:'操作',width:100,rowspan:2,
								formatter:function(value,rec){
									return '<span style="color:red">'+rec.name+'</span>';
								}
							}
				          
				],[
							{field:'code',title:'编号',width:80,sortable:true},
							{field:'name',title:'名称',width:120}
				]],
				pagination:true,
				rownumbers1:true,
				singleSelect:true,
				pageSize:10,
				pageList:[2,10,20],
				toolbar:[{
					text:'Add',
					iconCls:'icon-add',
					handler:function(){
						alert('add')
					}
				},{
					text:'Cut',
					iconCls:'icon-cut',
					handler:function(){
						alert('cut')
					}
				},'-',{
					text:'Save',
					iconCls:'icon-save'
				}],
				onSortColumn:function(sort,order){
					alert(sort+":"+order)
				}	
			});
		});
		function resize(){
			$('#test').datagrid({
				title: '新标题',
				striped: true,
				width: 650,
				loadMsg:'正在处理，请稍待。。。',
				queryParams:{
					a:'abc',
					name:'sjx'
				}
			});
		}
		function getSelected(){
			var selected = $('#test').datagrid('getSelected');
			alert(selected.code+":"+selected.name);
		}
		function getSelections(){
			var ids = [];
			var rows = $('#test').datagrid('getSelections');
			for(var i=0;i<rows.length;i++){
				ids.push(rows[i].orderNo);
			}
			alert(ids.join(':'))
		}
		function myformatter(value,rec){
			return 'a:'+value+'>'+rec.name;
		}
	</script>
</head>
<body>
	<a href="#" onclick="resize()">resize</a>
	<a href="#" onclick="getSelected()">getSelected</a>
	<a href="#" onclick="getSelections()">getSelections</a>
	
	<table id="test">
		<thead>
		  <tr> 
		    <th colspan="2">信息</th>
		    <th field="addr" rowspan="2" width="150" sortable="true">ADDRESS</th>
		    <th field="col4" rowspan="2" width="150" formatter="myformatter">COL4</th>
		  </tr>
		  <tr> 
		    <th field="code" width="80" align="right">CODE</th>
		    <th field="name" width="120">NAME</th>
		  </tr>
		</thead>
	</table>
</body>
</html>